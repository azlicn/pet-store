<div #containerDiv class="mermaid-container" [class.fullscreen]="isFullscreen">
  <!-- Zoom controls - only visible in fullscreen -->
  <div class="zoom-controls" *ngIf="isFullscreen">
    <button mat-mini-fab color="primary" (click)="zoomIn()" matTooltip="Zoom In">
      <mat-icon>add</mat-icon>
    </button>
    <button mat-mini-fab color="primary" (click)="zoomOut()" matTooltip="Zoom Out">
      <mat-icon>remove</mat-icon>
    </button>
    <button mat-mini-fab (click)="resetZoom()" matTooltip="Reset Zoom">
      <mat-icon>refresh</mat-icon>
    </button>
    <div class="zoom-label">{{ (zoomLevel * 100).toFixed(0) }}%</div>
  </div>

  <div class="diagram-header" *ngIf="title">
    <h3>{{ title }}</h3>
    <p *ngIf="description" class="diagram-description">{{ description }}</p>
  </div>
  <div 
    #mermaidDiv 
    class="mermaid-diagram"
    [id]="diagramId"
    (wheel)="onWheel($event)"
    (mousedown)="onMouseDown($event)"
    [style.cursor]="isFullscreen ? (isPanning ? 'grabbing' : 'grab') : 'default'">
    {{ diagramDefinition }}
  </div>
  <div class="diagram-actions" *ngIf="showActions">
    <button 
      mat-raised-button
      color="primary"
      (click)="toggleFullscreen(); $event.stopPropagation()"
      matTooltip="Toggle fullscreen view for better readability"
      class="action-btn fullscreen-btn">
      <mat-icon>{{ isFullscreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
      {{ isFullscreen ? 'Exit Fullscreen' : 'Fullscreen' }}
    </button>
    <button 
      mat-stroked-button
      (click)="downloadSVG(); $event.stopPropagation()"
      matTooltip="Download diagram as SVG file"
      class="action-btn">
      <mat-icon>download</mat-icon>
      Download
    </button>
    <button 
      mat-stroked-button
      (click)="copyToClipboard(); $event.stopPropagation()"
      matTooltip="Copy diagram definition to clipboard"
      class="action-btn">
      <mat-icon>content_copy</mat-icon>
      Copy
    </button>
  </div>
</div>