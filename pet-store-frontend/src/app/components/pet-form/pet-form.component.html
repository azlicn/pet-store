<div class="pet-form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{isEdit ? 'Edit Pet' : 'Add New Pet'}}</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      <form [formGroup]="petForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Pet Name</mat-label>
            <input matInput formControlName="name" placeholder="Enter pet name">
            <mat-error *ngIf="petForm.get('name')?.hasError('required')">
              Pet name is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" 
                     placeholder="Description" rows="3" maxlength="200"></textarea>
          <mat-hint align="end">{{ description?.value?.length || 0 }}/200</mat-hint>
          <mat-error *ngIf="description?.invalid && description?.touched">
            {{ getErrorMessage('description') }}
          </mat-error>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Category</mat-label>
            <mat-select formControlName="categoryId">
              <mat-option *ngFor="let category of categories" [value]="category.id">
                {{category.name}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="petForm.get('categoryId')?.hasError('required')">
              Category is required
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline">
            <mat-label>Price</mat-label>
            <span matPrefix>&nbsp;&nbsp;$</span>
            <input matInput type="number" formControlName="price" placeholder="Price">
            <mat-error *ngIf="petForm.get('price')?.hasError('required')">
              Price is required
            </mat-error>
            <mat-error *ngIf="petForm.get('price')?.hasError('min')">
              Price must be positive
            </mat-error>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline" *ngIf="!isEdit || isAdmin()">
            <mat-label>Status</mat-label>
            <mat-select formControlName="status">
              <mat-option value="AVAILABLE">Available</mat-option>
              <mat-option value="PENDING">Pending</mat-option>
              <mat-option value="SOLD">Sold</mat-option>
            </mat-select>
          </mat-form-field>
          
          <mat-form-field appearance="outline" *ngIf="isEdit && !isAdmin()">
            <mat-label>Status</mat-label>
            <input matInput 
                   [value]="getStatusDisplayText(petForm.get('status')?.value)" 
                   readonly>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Photo URLs (one per line)</mat-label>
            <textarea matInput formControlName="photoUrlsText" 
                     placeholder="https://example.com/photo1.jpg" rows="3"></textarea>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Tags (comma separated)</mat-label>
            <input matInput formControlName="tagsText" 
                   placeholder="friendly, trained, vaccinated">
          </mat-form-field>
        </div>
      </form>
    </mat-card-content>
    
    <mat-card-actions align="end">
      <button mat-flat-button color="primary" 
              (click)="onSubmit()" 
              [disabled]="!petForm.valid">
        <mat-icon>save</mat-icon>
        {{isEdit ? 'Update Pet' : 'Add Pet'}}
      </button>
      
      <button mat-flat-button (click)="onCancel()">
        <mat-icon>cancel</mat-icon>
        Cancel
      </button>
    </mat-card-actions>
  </mat-card>
</div>