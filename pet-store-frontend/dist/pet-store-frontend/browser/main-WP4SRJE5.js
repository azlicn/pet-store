import{a as Mt}from"./chunk-XGWPAENB.js";import{a as Et,b as St}from"./chunk-SNCR5QX2.js";import"./chunk-OVUCDZ47.js";import{a as d}from"./chunk-JBPC4PL7.js";import"./chunk-EY6RNGL4.js";import{b as bt,c as p,d as vt,e as yt,f as xt,g as Ct}from"./chunk-NWH3GCAN.js";import{$ as wt,N as I,ba as Pt,c as ut,ca as At,d as ft,da as kt,e as ht,f as gt,h as _t}from"./chunk-ORF7SHNW.js";import"./chunk-Q64FFBLU.js";import{$a as W,$b as lt,Ab as tt,Bc as dt,Cb as k,D as x,Dc as pt,Fa as q,Fb as E,Fc as w,Hb as S,Ib as et,Jb as T,Kb as ot,Mb as rt,Nb as nt,Ob as it,Pb as l,Rb as at,Va as f,Wa as C,X as F,Xa as Q,Xb as g,Z as j,Za as $,Zb as st,_ as N,ac as mt,bb as Y,bc as ct,cb as X,da as s,ia as u,ja as B,ka as H,la as V,lb as M,n as D,nb as v,o as U,pb as Z,qa as P,qb as J,r as z,ra as A,sc as _,wb as m,xb as i,ya as G,yb as h,zb as K}from"./chunk-4EBM5WXH.js";var Nt="@",Bt=(()=>{class t{constructor(e,o,n,a,c){this.doc=e,this.delegate=o,this.zone=n,this.animationType=a,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=s($,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-RHKZLJGU.js")).catch(o=>{throw new F(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:n})=>{this._engine=o(this.animationType,this.doc,this.scheduler);let a=new n(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,o){let n=this.delegate.createRenderer(e,o);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let a=new R(n);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let b=c.createRenderer(e,o);a.use(b)}).catch(c=>{a.use(n)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(o){Q()}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),R=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let e of this.replay)e(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,e){return this.delegate.createElement(r,e)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,e){this.delegate.appendChild(r,e)}insertBefore(r,e,o,n){this.delegate.insertBefore(r,e,o,n)}removeChild(r,e,o){this.delegate.removeChild(r,e,o)}selectRootElement(r,e){return this.delegate.selectRootElement(r,e)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,e,o,n){this.delegate.setAttribute(r,e,o,n)}removeAttribute(r,e,o){this.delegate.removeAttribute(r,e,o)}addClass(r,e){this.delegate.addClass(r,e)}removeClass(r,e){this.delegate.removeClass(r,e)}setStyle(r,e,o,n){this.delegate.setStyle(r,e,o,n)}removeStyle(r,e,o){this.delegate.removeStyle(r,e,o)}setProperty(r,e,o){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(r,e,o)),this.delegate.setProperty(r,e,o)}setValue(r,e){this.delegate.setValue(r,e)}listen(r,e,o){return this.shouldReplay(e)&&this.replay.push(n=>n.listen(r,e,o)),this.delegate.listen(r,e,o)}shouldReplay(r){return this.replay!==null&&r.startsWith(Nt)}};function Tt(t="animations"){return Y("NgAsyncAnimations"),V([{provide:W,useFactory:(r,e,o)=>new Bt(r,e,o,t),deps:[_,ht,X]},{provide:q,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var It=(t,r)=>{let e=s(d),o=s(p);return e.isLoggedIn()?!0:(o.navigate(["/unauthorized"],{queryParams:{type:"not-logged-in",returnUrl:r.url}}),!1)},y=(t,r)=>{let e=s(d),o=s(p);return e.isLoggedIn()?e.isAdmin()?!0:(o.navigate(["/unauthorized"],{queryParams:{type:"forbidden",returnUrl:r.url}}),!1):(o.navigate(["/unauthorized"],{queryParams:{type:"not-logged-in",returnUrl:r.url}}),!1)};var Rt=(t,r)=>{let e=s(d),o=s(p);if(!e.isLoggedIn())return o.navigate(["/unauthorized"],{queryParams:{type:"not-logged-in",returnUrl:r.url}}),!1;let n=parseInt(t.paramMap.get("id")||"0"),a=e.getCurrentUser();return e.isAdmin()||a&&a.id===n?!0:(o.navigate(["/unauthorized"],{queryParams:{type:"forbidden",returnUrl:r.url}}),!1)};var Ot=(t,r)=>{let e=s(d),o=s(Mt),n=s(p);if(!e.isLoggedIn())return n.navigate(["/unauthorized"],{queryParams:{type:"not-logged-in",returnUrl:r.url}}),!1;let a=parseInt(t.paramMap.get("id")||"0"),c=e.getCurrentUser();return!c||!a?(n.navigate(["/unauthorized"],{queryParams:{type:"forbidden",returnUrl:r.url}}),!1):e.isAdmin()?!0:o.getPetById(a).pipe(z(b=>b.createdBy===c.id?!0:(n.navigate(["/unauthorized"],{queryParams:{type:"forbidden",returnUrl:r.url}}),!1)),x(b=>(console.error("Error checking pet ownership:",b),n.navigate(["/unauthorized"],{queryParams:{type:"forbidden",returnUrl:r.url}}),D(!1))))};var Lt=[{path:"",loadComponent:()=>import("./chunk-54EKOHQ7.js").then(t=>t.HomeComponent)},{path:"home",redirectTo:"",pathMatch:"full"},{path:"pets",loadComponent:()=>import("./chunk-FLWEPU57.js").then(t=>t.PetListComponent)},{path:"pets/add",loadComponent:()=>import("./chunk-RHHCSRK6.js").then(t=>t.PetFormComponent),canActivate:[It]},{path:"pets/edit/:id",loadComponent:()=>import("./chunk-RHHCSRK6.js").then(t=>t.PetFormComponent),canActivate:[Ot]},{path:"login",loadComponent:()=>import("./chunk-R6PWWH2I.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-HC7A4NIF.js").then(t=>t.RegisterComponent)},{path:"users",loadComponent:()=>import("./chunk-44HCXSBW.js").then(t=>t.UserListComponent),canActivate:[y]},{path:"users/:id/edit",loadComponent:()=>import("./chunk-2BPD276V.js").then(t=>t.UserEditComponent),canActivate:[Rt]},{path:"categories",loadComponent:()=>import("./chunk-GSYCNIR2.js").then(t=>t.CategoryListComponent),canActivate:[y]},{path:"categories/add",loadComponent:()=>import("./chunk-CSXBCPG5.js").then(t=>t.CategoryFormComponent),canActivate:[y]},{path:"categories/edit/:id",loadComponent:()=>import("./chunk-CSXBCPG5.js").then(t=>t.CategoryFormComponent),canActivate:[y]},{path:"unauthorized",loadComponent:()=>import("./chunk-S6LHFYAY.js").then(t=>t.UnauthorizedComponent)},{path:"docs",loadComponent:()=>import("./chunk-3DJQQBKG.js").then(t=>t.DocumentationComponent)},{path:"**",redirectTo:""}];var Ht=(t,r)=>{let o=s(d).getToken();if(o){let n=t.clone({headers:t.headers.set("Authorization",`Bearer ${o}`)});return r(n)}return r(t)},Vt=(t,r)=>{let e=s(p),o=s(d);return r(t).pipe(x(n=>{if(n.status===401)o.logout(),e.navigate(["/unauthorized"],{queryParams:{type:"not-logged-in",returnUrl:e.url}});else if(n.status===403){let a=n.error?.message||"",c="forbidden";(a.includes("own profile")||t.url.includes("/users/")&&t.method!=="GET"||a.includes("own pet")||t.url.includes("/pets/")&&t.method!=="GET")&&(c="forbidden"),e.navigate(["/unauthorized"],{queryParams:{type:c,returnUrl:e.url}})}return U(()=>n)}))},Dt={providers:[xt(Lt),ut(ft([Ht,Vt])),Tt()]};var Gt=["*",[["mat-toolbar-row"]]],qt=["*","mat-toolbar-row"],L=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275dir=H({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return t})(),Ut=(()=>{class t{constructor(e,o,n){this._elementRef=e,this._platform=o,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(o){return new(o||t)(C(G),C(_t),C(_))}}static{this.\u0275cmp=u({type:t,selectors:[["mat-toolbar"]],contentQueries:function(o,n,a){if(o&1&&ot(a,L,5),o&2){let c;rt(c=nt())&&(n._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(o,n){o&2&&(J(n.color?"mat-"+n.color:""),Z("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",n._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[g],ngContentSelectors:qt,decls:2,vars:0,template:function(o,n){o&1&&(et(Gt),T(0),T(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return t})();var zt=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=B({type:t})}static{this.\u0275inj=N({imports:[I,I]})}}return t})();var $t=t=>["/users",t,"edit"];function Wt(t,r){t&1&&(m(0,"button",14)(1,"mat-icon"),l(2,"category"),i(),l(3," Categories "),i())}function Yt(t,r){t&1&&(m(0,"button",15)(1,"mat-icon"),l(2,"people"),i(),l(3," Users "),i())}function Xt(t,r){if(t&1){let e=k();K(0),m(1,"span",16),l(2),i(),m(3,"button",17)(4,"mat-icon"),l(5,"person"),i(),l(6," Profile "),i(),m(7,"button",18),E("click",function(){P(e);let n=S();return A(n.onLogout())}),m(8,"mat-icon"),l(9,"logout"),i(),l(10," Logout "),i(),tt()}if(t&2){let e=r.ngIf;f(2),at("Welcome, ",e.firstName,"!"),f(),v("routerLink",st(2,$t,e.id))}}function Zt(t,r){if(t&1){let e=k();m(0,"button",19),E("click",function(){P(e);let n=S();return A(n.navigateToLogin())}),m(1,"mat-icon"),l(2,"login"),i(),l(3," Login "),i()}}var Ft=(()=>{class t{constructor(){this.authService=s(d),this.router=s(p),this.currentUser$=this.authService.currentUser$}onLogout(){this.authService.logout(),this.router.navigate(["/"])}navigateToLogin(){this.router.navigate(["/login"])}isAdmin(){return this.authService.isAdmin()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-header"]],standalone:!0,features:[g],decls:26,vars:6,consts:[["loginButton",""],["color","primary",1,"header-toolbar"],["routerLink","/",1,"logo-section"],[1,"logo"],[1,"logo-icon"],[1,"store-name"],[1,"spacer"],[1,"nav-links"],["mat-button","","routerLink","/pets","routerLinkActive","active"],["mat-button","","routerLink","/docs","routerLinkActive","active"],["mat-button","","routerLink","/categories","routerLinkActive","active",4,"ngIf"],["mat-button","","routerLink","/users","routerLinkActive","active",4,"ngIf"],[1,"user-section"],[4,"ngIf","ngIfElse"],["mat-button","","routerLink","/categories","routerLinkActive","active"],["mat-button","","routerLink","/users","routerLinkActive","active"],[1,"user-info"],["mat-button","","matTooltip","Edit Profile",3,"routerLink"],["mat-button","",3,"click"],["mat-flat-button","","color","accent",3,"click"]],template:function(o,n){if(o&1&&(m(0,"mat-toolbar",1)(1,"mat-toolbar-row")(2,"div",2)(3,"div",3)(4,"mat-icon",4),l(5,"pets"),i()(),m(6,"span",5),l(7,"Pawfect Store"),i()(),h(8,"span",6),m(9,"div",7)(10,"button",8)(11,"mat-icon"),l(12,"pets"),i(),l(13," Browse Pets "),i(),m(14,"button",9)(15,"mat-icon"),l(16,"architecture"),i(),l(17," Docs "),i(),M(18,Wt,4,0,"button",10)(19,Yt,4,0,"button",11),i(),h(20,"span",6),m(21,"div",12),M(22,Xt,11,4,"ng-container",13),lt(23,"async"),M(24,Zt,4,0,"ng-template",null,0,ct),i()()()),o&2){let a=it(25);f(18),v("ngIf",n.isAdmin()),f(),v("ngIf",n.isAdmin()),f(3),v("ngIf",mt(23,4,n.currentUser$))("ngIfElse",a)}},dependencies:[w,dt,pt,Ct,vt,yt,zt,Ut,L,Pt,wt,kt,At,St,Et],styles:[".header-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 8px var(--card-shadow);background:linear-gradient(135deg,var(--primary-yellow) 0%,var(--accent-orange) 100%)!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;cursor:pointer;padding:8px 16px;border-radius:8px;transition:background-color .3s ease}.logo-section[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#fff;border-radius:50%;box-shadow:0 4px 12px #0003}.logo-icon[_ngcontent-%COMP%]{color:var(--accent-orange);font-size:24px;width:24px;height:24px}.store-name[_ngcontent-%COMP%]{font-size:1.8rem;font-family:var(--font-heading)!important;font-weight:400;color:#fff;letter-spacing:1.5px;text-transform:uppercase}.nav-links[_ngcontent-%COMP%]{display:flex;gap:8px}.nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;transition:all .3s ease}.nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-links[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#fff3;font-family:var(--font-heading)!important;font-weight:400;letter-spacing:.8px}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.user-info[_ngcontent-%COMP%]{font-family:var(--font-body)!important;font-weight:400;font-style:italic;color:#ffffffe6}@media (max-width: 768px){.nav-links[_ngcontent-%COMP%]{display:none}.store-name[_ngcontent-%COMP%]{font-size:1.4rem;font-family:var(--font-heading)!important;letter-spacing:1px}.user-info[_ngcontent-%COMP%]{display:none}.user-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px}.logo[_ngcontent-%COMP%]{width:32px;height:32px}.logo-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}}@media (max-width: 480px){.logo-section[_ngcontent-%COMP%]{gap:8px;padding:4px 8px}.store-name[_ngcontent-%COMP%]{font-size:1.2rem;font-family:var(--font-heading)!important;letter-spacing:.8px}.user-section[_ngcontent-%COMP%]{gap:8px}}"]})}}return t})();var jt=(()=>{class t{constructor(){this.title="Pawfect Store"}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-root"]],standalone:!0,features:[g],decls:3,vars:0,consts:[[1,"main-content"]],template:function(o,n){o&1&&(h(0,"app-header"),m(1,"main",0),h(2,"router-outlet"),i())},dependencies:[w,bt,Ft],styles:[".main-content[_ngcontent-%COMP%]{padding:0;min-height:calc(100vh - 64px);background:linear-gradient(135deg,var(--background-cream) 0%,var(--background-light) 100%)}"]})}}return t})();gt(jt,Dt).catch(t=>console.error(t));
