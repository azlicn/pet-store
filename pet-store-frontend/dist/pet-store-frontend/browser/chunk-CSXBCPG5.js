import{a as et}from"./chunk-7XBR4NAU.js";import{a as W,b as X}from"./chunk-D6YOMAUJ.js";import{a as Z,b as tt}from"./chunk-5ZXECSJE.js";import{a as nt,b as ot}from"./chunk-C2N3VAR6.js";import"./chunk-OVUCDZ47.js";import"./chunk-EY6RNGL4.js";import{a as G,b as u,d as L,e as A,h as q,j as D,k as $,l as z,m as U,o as N,p as R,q as H,r as Y,t as J,w as K,x as Q}from"./chunk-IVESP2IG.js";import{a as S,b as I,c as F,f as k,g as w}from"./chunk-CWIOIJCP.js";import{a as v,c as E}from"./chunk-NWH3GCAN.js";import{$ as B,ba as T,ca as j,da as V}from"./chunk-ORF7SHNW.js";import"./chunk-Q64FFBLU.js";import{Bc as O,Cb as b,Fb as M,Fc as P,Hb as g,Pb as i,Qb as y,Rb as d,Va as o,Wa as s,Xb as x,ia as h,lb as f,nb as m,qa as C,ra as _,wb as r,xb as a,yb as p}from"./chunk-4EBM5WXH.js";function it(n,l){n&1&&(r(0,"div",4),p(1,"mat-spinner",5),r(2,"p"),i(3,"Loading category..."),a()())}function ct(n,l){if(n&1&&(r(0,"mat-error"),i(1),a()),n&2){let t=g(2);o(),d(" ",t.getErrorMessage("name")," ")}}function mt(n,l){if(n&1&&(r(0,"mat-icon"),i(1),a()),n&2){let t=g(2);o(),y(t.isEditMode?"save":"add")}}function st(n,l){n&1&&p(0,"mat-spinner",16)}function gt(n,l){if(n&1){let t=b();r(0,"form",6),M("ngSubmit",function(){C(t);let c=g();return _(c.onSubmit())}),r(1,"mat-form-field",7)(2,"mat-label"),i(3,"Category Name"),a(),p(4,"input",8),r(5,"mat-icon",9),i(6,"category"),a(),r(7,"mat-hint",10),i(8),a(),f(9,ct,2,1,"mat-error",11),a(),r(10,"div",12)(11,"button",13),f(12,mt,2,1,"mat-icon",11)(13,st,1,0,"mat-spinner",14),i(14),a(),r(15,"button",15),M("click",function(){C(t);let c=g();return _(c.onCancel())}),r(16,"mat-icon"),i(17,"cancel"),a(),i(18," Cancel "),a()()()}if(n&2){let t=g();m("formGroup",t.categoryForm),o(8),d("",(t.name==null||t.name.value==null?null:t.name.value.length)||0,"/30"),o(),m("ngIf",(t.name==null?null:t.name.invalid)&&(t.name==null?null:t.name.touched)),o(2),m("disabled",t.categoryForm.invalid||t.submitting),o(),m("ngIf",!t.submitting),o(),m("ngIf",t.submitting),o(),d(" ",t.submitting?"Saving...":t.isEditMode?"Update Category":"Create Category"," "),o(),m("disabled",t.submitting)}}var Bt=(()=>{class n{constructor(t,e,c,rt,at){this.fb=t,this.categoryService=e,this.router=c,this.route=rt,this.snackBar=at,this.isEditMode=!1,this.categoryId=null,this.loading=!1,this.submitting=!1,this.categoryForm=this.fb.group({name:["",[u.required,u.minLength(2),u.maxLength(30)]]})}ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.categoryId=+t.id,this.loadCategory())})}loadCategory(){this.categoryId&&(this.loading=!0,this.categoryService.getCategoryById(this.categoryId).subscribe({next:t=>{this.categoryForm.patchValue({name:t.name}),this.loading=!1},error:t=>{console.error("Error loading category:",t),this.snackBar.open("Error loading category","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.loading=!1,this.router.navigate(["/categories"])}}))}onSubmit(){if(this.categoryForm.valid){this.submitting=!0;let t={name:this.categoryForm.value.name.trim()};this.isEditMode&&this.categoryId?this.categoryService.updateCategory(this.categoryId,t).subscribe({next:e=>{this.snackBar.open("Category updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/categories"])},error:e=>{console.error("Error updating category:",e),this.snackBar.open("Error updating category","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.submitting=!1}}):this.categoryService.createCategory(t).subscribe({next:e=>{this.snackBar.open("Category created successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/categories"])},error:e=>{console.error("Error creating category:",e),this.snackBar.open("Error creating category","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.submitting=!1}})}else this.markFormGroupTouched()}onCancel(){this.router.navigate(["/categories"])}markFormGroupTouched(){Object.keys(this.categoryForm.controls).forEach(t=>{this.categoryForm.get(t)?.markAsTouched()})}get name(){return this.categoryForm.get("name")}getErrorMessage(t){let e=this.categoryForm.get(t);return e?.hasError("required")?`${t.charAt(0).toUpperCase()+t.slice(1)} is required`:e?.hasError("minlength")?`${t.charAt(0).toUpperCase()+t.slice(1)} must be at least ${e.errors?.minlength.requiredLength} characters`:e?.hasError("maxlength")?`${t.charAt(0).toUpperCase()+t.slice(1)} must not exceed ${e.errors?.maxlength.requiredLength} characters`:""}static{this.\u0275fac=function(e){return new(e||n)(s(U),s(et),s(E),s(v),s(Z))}}static{this.\u0275cmp=h({type:n,selectors:[["app-category-form"]],standalone:!0,features:[x],decls:10,vars:4,consts:[[1,"category-form-container"],[1,"category-form-card"],["class","loading-container",4,"ngIf"],["class","category-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"category-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter category name","maxlength","30"],["matSuffix",""],["align","end"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["diameter","20",4,"ngIf"],["mat-button","","type","button",1,"cancel-button",3,"click","disabled"],["diameter","20"]],template:function(e,c){e&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),i(5),a(),i(6),a()(),r(7,"mat-card-content"),f(8,it,4,0,"div",2)(9,gt,19,8,"form",3),a()()()),e&2&&(o(5),y(c.isEditMode?"edit":"add"),o(),d(" ",c.isEditMode?"Edit Category":"Create New Category"," "),o(2),m("ngIf",c.loading),o(),m("ngIf",!c.loading))},dependencies:[P,O,N,q,G,L,A,z,D,$,w,S,F,k,I,Q,K,R,Y,H,J,X,W,T,B,V,j,tt,ot,nt],styles:[".category-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:calc(100vh - 64px);padding:2rem 1rem;background-color:#f5f5f5}.category-form-card[_ngcontent-%COMP%]{width:100%;max-width:600px;box-shadow:0 4px 6px #0000001a;border-radius:12px}.category-form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:1rem;border-bottom:1px solid #e0e0e0;margin-bottom:1.5rem}.category-form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem;font-weight:500;color:#333}.category-form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.category-form-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;text-align:center}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.category-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:.5rem}.category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-hint-wrapper[_ngcontent-%COMP%], .category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-error-wrapper[_ngcontent-%COMP%]{padding:0 1rem}.category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[matSuffix][_ngcontent-%COMP%]{color:#666}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;min-width:160px;font-weight:500}.form-actions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:.5rem}.form-actions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]:disabled{opacity:.6}.form-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666}.form-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.form-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:disabled{opacity:.6}@media (max-width: 768px){.category-form-container[_ngcontent-%COMP%]{padding:1rem .5rem}.category-form-card[_ngcontent-%COMP%]{max-width:100%;margin:0;box-shadow:none;border-radius:0}.category-form-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem}.category-form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.3rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}.form-actions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.category-form-container[_ngcontent-%COMP%]{padding:.5rem}.category-form[_ngcontent-%COMP%]{gap:1rem}.form-actions[_ngcontent-%COMP%]{margin-top:1rem}}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}  .mat-mdc-form-field.mat-focused .mat-mdc-form-field-outline-thick{border-color:#1976d2}  .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-form-field-outline-thick{border-color:#f44336}.category-form.submitting[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:first-child   input[_ngcontent-%COMP%]:focus{outline:none}.category-form-card[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.category-form-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #00000026}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}"]})}}return n})();export{Bt as CategoryFormComponent};
