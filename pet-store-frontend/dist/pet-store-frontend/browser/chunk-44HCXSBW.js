import{a as st}from"./chunk-K53XEX3X.js";import{a as mt,b as ct}from"./chunk-C2N3VAR6.js";import{a as K,b as W,c as q,d as G,e as J,f as Q,g as X,h as Z,i as tt,j as et,k as nt,n as it,r as ot,s as lt}from"./chunk-VARSF3PV.js";import{a as rt,b as at}from"./chunk-SNCR5QX2.js";import{a as B,b as V,c as Y}from"./chunk-PUKFZD22.js";import"./chunk-OVUCDZ47.js";import{a as T}from"./chunk-JBPC4PL7.js";import"./chunk-EY6RNGL4.js";import"./chunk-IVESP2IG.js";import{a as L,b as I,c as k,d as R,e as $,f as F,g as N}from"./chunk-CWIOIJCP.js";import{c as D,g as E}from"./chunk-NWH3GCAN.js";import{aa as A,ba as H,ca as z,da as j}from"./chunk-ORF7SHNW.js";import"./chunk-Q64FFBLU.js";import{Ab as p,Ac as w,Bc as S,Cb as b,Fb as v,Fc as U,Hb as g,Pb as a,Qb as f,Rb as O,Sb as P,Va as l,Xb as y,da as u,ia as M,lb as m,nb as c,qa as x,ra as h,wb as i,xb as n,yb as _,zb as d}from"./chunk-4EBM5WXH.js";function dt(t,o){t&1&&(i(0,"div",6),_(1,"mat-spinner",7),i(2,"p"),a(3,"Loading users..."),n()())}function pt(t,o){t&1&&(i(0,"th",20),a(1,"ID"),n())}function gt(t,o){if(t&1&&(i(0,"td",21),a(1),n()),t&2){let e=o.$implicit;l(),f(e.id)}}function ut(t,o){t&1&&(i(0,"th",20),a(1,"Name"),n())}function _t(t,o){t&1&&(i(0,"span",24),a(1,"(You)"),n())}function ft(t,o){if(t&1&&(i(0,"td",21)(1,"div",22)(2,"strong"),a(3),n(),m(4,_t,2,0,"span",23),n()()),t&2){let e=o.$implicit,r=g(2);l(3),P("",e.firstName," ",e.lastName,""),l(),c("ngIf",r.isCurrentUser(e.id))}}function Ct(t,o){t&1&&(i(0,"th",20),a(1,"Email"),n())}function Mt(t,o){if(t&1&&(i(0,"td",21)(1,"span"),a(2),n()()),t&2){let e=o.$implicit;l(2),f(e.email)}}function xt(t,o){t&1&&(i(0,"th",20),a(1,"Roles"),n())}function ht(t,o){if(t&1&&(i(0,"mat-chip",27),a(1),n()),t&2){let e=o.$implicit,r=g(3);c("color",r.getRoleColor(e)),l(),O(" ",e," ")}}function bt(t,o){if(t&1&&(i(0,"td",21)(1,"div",25)(2,"mat-chip-set"),m(3,ht,2,2,"mat-chip",26),n()()()),t&2){let e=o.$implicit;l(3),c("ngForOf",e.roles)}}function vt(t,o){t&1&&(i(0,"th",20),a(1,"Created"),n())}function Ot(t,o){if(t&1&&(i(0,"td",21)(1,"span"),a(2),n()()),t&2){let e=o.$implicit,r=g(2);l(2),f(r.formatDate(e.createdAt))}}function Pt(t,o){t&1&&(i(0,"th",20),a(1,"Actions"),n())}function yt(t,o){if(t&1){let e=b();i(0,"td",21)(1,"div",28)(2,"button",29),v("click",function(){let s=x(e).$implicit,C=g(2);return h(C.onDeleteUser(s))}),i(3,"mat-icon"),a(4,"delete"),n()()()()}if(t&2){let e=o.$implicit,r=g(2);l(2),c("disabled",r.isCurrentUser(e.id))("matTooltip",r.isCurrentUser(e.id)?"Cannot delete your own account":"Delete User")}}function wt(t,o){t&1&&_(0,"tr",30)}function St(t,o){t&1&&_(0,"tr",31)}function Ut(t,o){if(t&1&&(i(0,"div",8)(1,"table",9),d(2,10),m(3,pt,2,0,"th",11)(4,gt,2,1,"td",12),p(),d(5,13),m(6,ut,2,0,"th",11)(7,ft,5,3,"td",12),p(),d(8,14),m(9,Ct,2,0,"th",11)(10,Mt,3,1,"td",12),p(),d(11,15),m(12,xt,2,0,"th",11)(13,bt,4,1,"td",12),p(),d(14,16),m(15,vt,2,0,"th",11)(16,Ot,3,1,"td",12),p(),d(17,17),m(18,Pt,2,0,"th",11)(19,yt,5,2,"td",12),p(),m(20,wt,1,0,"tr",18)(21,St,1,0,"tr",19),n()()),t&2){let e=g();l(),c("dataSource",e.users),l(19),c("matHeaderRowDef",e.displayedColumns),l(),c("matRowDefColumns",e.displayedColumns)}}function Dt(t,o){t&1&&(i(0,"div",32)(1,"mat-icon",33),a(2,"people_outline"),n(),i(3,"h3"),a(4,"No Users Found"),n(),i(5,"p"),a(6,"There are no users in the system."),n()())}var te=(()=>{class t{constructor(){this.userService=u(st),this.authService=u(T),this.dialog=u(it),this.router=u(D),this.users=[],this.loading=!1,this.displayedColumns=["id","name","email","roles","createdAt","actions"]}ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.userService.getUsers().subscribe({next:e=>{this.users=e,this.loading=!1},error:e=>{console.error("Error loading users:",e),alert("Failed to load users"),this.loading=!1}})}onDeleteUser(e){if(!e.id)return;let r={title:"Delete User",message:`Are you sure you want to delete user "<strong>${e.firstName} ${e.lastName}</strong>"?
This action cannot be undone and will permanently remove this user from the system.`,confirmText:"Delete User",cancelText:"Keep User",icon:"delete_forever"};this.dialog.open(lt,{width:"400px",maxWidth:"90vw",data:r,disableClose:!0,panelClass:"confirm-dialog-container",hasBackdrop:!0,backdropClass:"confirm-dialog-backdrop"}).afterClosed().subscribe(C=>{C&&this.deleteUser(e.id)})}deleteUser(e){this.userService.deleteUser(e).subscribe({next:r=>{alert(r.message),this.loadUsers()},error:r=>{console.error("Error deleting user:",r),alert(r.error?.message||"Failed to delete user")}})}isCurrentUser(e){return this.authService.getCurrentUser()?.id===e}getRoleColor(e){return e==="ADMIN"?"warn":"primary"}formatDate(e){return new Date(e).toLocaleDateString()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=M({type:t,selectors:[["app-user-list"]],standalone:!0,features:[y],decls:16,vars:3,consts:[[1,"user-list-container"],[1,"title-icon"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["align","end"],[1,"loading-container"],["diameter","50"],[1,"table-container"],["mat-table","",1,"user-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","roles"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"user-name"],["class","current-user-badge",4,"ngIf"],[1,"current-user-badge"],[1,"roles-container"],["selected","",3,"color",4,"ngFor","ngForOf"],["selected","",3,"color"],[1,"action-buttons"],["mat-icon-button","","color","warn",3,"click","disabled","matTooltip"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"large-icon"]],template:function(r,s){r&1&&(i(0,"div",0)(1,"h1"),a(2,"Users"),n(),i(3,"mat-card")(4,"mat-card-header")(5,"mat-card-title")(6,"mat-icon",1),a(7,"people"),n(),a(8," User Management "),n(),i(9,"mat-card-subtitle"),a(10,"Manage system users"),n()(),i(11,"mat-card-content"),m(12,dt,4,0,"div",2)(13,Ut,22,3,"div",3)(14,Dt,7,0,"div",4),n(),_(15,"mat-card-actions",5),n()()),r&2&&(l(12),c("ngIf",s.loading),l(),c("ngIf",!s.loading&&s.users.length>0),l(),c("ngIf",!s.loading&&s.users.length===0))},dependencies:[U,w,S,E,N,L,$,k,F,R,I,H,A,j,z,nt,K,q,X,G,W,Z,J,Q,tt,et,Y,B,V,ot,ct,mt,at,rt],styles:[".user-list-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.title-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 0}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#0009}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:16px}.user-table[_ngcontent-%COMP%]{width:100%}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-family:var(--font-heading)!important;background-color:rgba(var(--primary-yellow-rgb),.1)}.user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px}.user-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgba(var(--primary-yellow-rgb),.05)}.user-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.user-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-family:var(--font-heading)!important}.current-user-badge[_ngcontent-%COMP%]{background:var(--primary-yellow);color:#fff;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:500}.roles-container[_ngcontent-%COMP%]   .mat-mdc-chip-set[_ngcontent-%COMP%]{margin:0}.roles-container[_ngcontent-%COMP%]   .mat-mdc-chip[_ngcontent-%COMP%]{font-size:.8rem;min-height:24px}.roles-container[_ngcontent-%COMP%]   .mat-mdc-chip.mat-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-yellow) 0%,var(--accent-orange) 100%);color:#fff}.roles-container[_ngcontent-%COMP%]   .mat-mdc-chip.mat-warn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5722,#f44336);color:#fff}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}.action-buttons[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-yellow) 0%,var(--accent-orange) 100%);color:#fff}.action-buttons[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--accent-orange) 0%,var(--primary-yellow) 100%)}.action-buttons[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5722,#f44336);color:#fff}.action-buttons[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f44336,#ff5722)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 0;text-align:center}.empty-state[_ngcontent-%COMP%]   .large-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#0000004d;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-family:var(--font-heading)!important;color:#000000b3}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#00000080}.add-user-button.mat-flat-button[_ngcontent-%COMP%], .refresh-button.mat-flat-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-yellow) 0%,var(--accent-orange) 100%);color:#fff;font-family:var(--font-button)!important}.add-user-button.mat-flat-button[_ngcontent-%COMP%]:hover, .refresh-button.mat-flat-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--accent-orange) 0%,var(--primary-yellow) 100%);transform:translateY(-1px)}.refresh-button.mat-flat-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0e0e0,#bdbdbd);color:#000000b3}.refresh-button.mat-flat-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bdbdbd,#e0e0e0)}@media (max-width: 768px){.user-list-container[_ngcontent-%COMP%]{padding:16px}.table-container[_ngcontent-%COMP%]{font-size:.9rem}.user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 12px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px}}@media (max-width: 480px){.user-table[_ngcontent-%COMP%]{font-size:.8rem}.user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px 8px}.mat-column-id[_ngcontent-%COMP%]{display:none}}"]})}}return t})();export{te as UserListComponent};
