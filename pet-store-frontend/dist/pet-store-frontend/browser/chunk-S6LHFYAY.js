import{a as U}from"./chunk-JBPC4PL7.js";import{a as z,c as k,g as I}from"./chunk-CWIOIJCP.js";import{a as v,c as O,g as w}from"./chunk-NWH3GCAN.js";import{$ as T,ba as S,ca as E,da as L}from"./chunk-ORF7SHNW.js";import{Bc as y,Cb as C,Fb as m,Fc as P,Hb as g,Pb as r,Qb as u,Rb as f,Va as i,Xb as b,da as s,ia as h,lb as p,nb as c,qa as _,ra as x,wb as n,xb as o,zc as M}from"./chunk-4EBM5WXH.js";function A(e,l){if(e&1&&(n(0,"div",15)(1,"p")(2,"strong"),r(3,"Attempted to access:"),o(),r(4),o()()),e&2){let a=g();i(4),f(" ",a.attemptedUrl,"")}}function B(e,l){if(e&1){let a=C();n(0,"button",16),m("click",function(){_(a);let t=g();return x(t.onLogin())}),n(1,"mat-icon"),r(2,"login"),o(),r(3," Log In "),o()}}function G(e,l){e&1&&(n(0,"p"),r(1," Please log in with your account to continue. "),o())}function R(e,l){e&1&&(n(0,"p"),r(1," You can only edit your own user profile. Administrators can edit any user profile. "),o())}function j(e,l){e&1&&(n(0,"p"),r(1," You can only edit pets that you have created. Administrators can edit any pet. "),o())}function q(e,l){e&1&&(n(0,"p"),r(1," If you believe this is an error, please contact your administrator. "),o())}function F(e,l){e&1&&(n(0,"p"),r(1," If you need access to this resource, please contact support. "),o())}var nt=(()=>{class e{constructor(){this.authService=s(U),this.router=s(O),this.route=s(v),this.errorType="general",this.attemptedUrl=null,this.errorMessage="You do not have permission to access this page."}ngOnInit(){this.route.queryParams.subscribe(a=>{this.errorType=a.type||"general",this.attemptedUrl=a.returnUrl||null,this.setErrorMessage()})}setErrorMessage(){switch(this.errorType){case"not-logged-in":this.errorMessage="You need to log in to access this page.";break;case"forbidden":this.attemptedUrl&&this.attemptedUrl.includes("/users/")&&this.attemptedUrl.includes("/edit")?this.errorMessage="You can only edit your own profile or you need admin permissions.":this.attemptedUrl&&this.attemptedUrl.includes("/pets/edit/")?this.errorMessage="You can only edit pets that you created or you need admin permissions.":this.errorMessage="You do not have sufficient permissions to access this page.";break;default:this.errorMessage="You do not have permission to access this page.";break}}onLogin(){let a=this.attemptedUrl||"/";this.router.navigate(["/login"],{queryParams:{returnUrl:a}})}onGoHome(){this.router.navigate(["/"])}onGoBack(){window.history.back()}get isLoggedIn(){return this.authService.isLoggedIn()}get showLoginButton(){return this.errorType==="not-logged-in"||!this.isLoggedIn}get pageTitle(){switch(this.errorType){case"not-logged-in":return"Login Required";case"forbidden":return"Access Forbidden";default:return"Unauthorized Access"}}get pageIcon(){switch(this.errorType){case"not-logged-in":return"login";case"forbidden":return"block";default:return"security"}}static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275cmp=h({type:e,selectors:[["app-unauthorized"]],standalone:!0,features:[b],decls:29,vars:12,consts:[[1,"unauthorized-container"],[1,"unauthorized-card"],[1,"card-content"],[1,"error-header"],[1,"error-icon",3,"ngClass"],[1,"error-code"],[1,"error-title"],[1,"error-message"],["class","attempted-url",4,"ngIf"],[1,"action-buttons"],["mat-raised-button","","color","primary","class","action-button",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",1,"action-button",3,"click"],["mat-stroked-button","",1,"action-button",3,"click"],[1,"help-text"],[4,"ngIf"],[1,"attempted-url"],["mat-raised-button","","color","primary",1,"action-button",3,"click"]],template:function(d,t){d&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-content",2)(3,"div",3)(4,"mat-icon",4),r(5),o(),n(6,"h1",5),r(7),o()(),n(8,"h2",6),r(9),o(),n(10,"p",7),r(11),o(),p(12,A,5,1,"div",8),n(13,"div",9),p(14,B,4,0,"button",10),n(15,"button",11),m("click",function(){return t.onGoHome()}),n(16,"mat-icon"),r(17,"home"),o(),r(18," Go to Home "),o(),n(19,"button",12),m("click",function(){return t.onGoBack()}),n(20,"mat-icon"),r(21,"arrow_back"),o(),r(22," Go Back "),o()(),n(23,"div",13),p(24,G,2,0,"p",14)(25,R,2,0,"p",14)(26,j,2,0,"p",14)(27,q,2,0,"p",14)(28,F,2,0,"p",14),o()()()()),d&2&&(i(4),c("ngClass",t.pageIcon),i(),u(t.pageIcon),i(2),f(" ",t.errorType==="not-logged-in"?"401":"403"," "),i(2),u(t.pageTitle),i(2),u(t.errorMessage),i(),c("ngIf",t.attemptedUrl),i(2),c("ngIf",t.showLoginButton),i(10),c("ngIf",t.errorType==="not-logged-in"),i(),c("ngIf",t.errorType==="forbidden"&&(t.attemptedUrl==null?null:t.attemptedUrl.includes("/users/"))&&(t.attemptedUrl==null?null:t.attemptedUrl.includes("/edit"))),i(),c("ngIf",t.errorType==="forbidden"&&(t.attemptedUrl==null?null:t.attemptedUrl.includes("/pets/edit/"))),i(),c("ngIf",t.errorType==="forbidden"&&!(t.attemptedUrl!=null&&t.attemptedUrl.includes("/users/")&&(t.attemptedUrl!=null&&t.attemptedUrl.includes("/edit")))&&!(t.attemptedUrl!=null&&t.attemptedUrl.includes("/pets/edit/"))),i(),c("ngIf",t.errorType==="general"))},dependencies:[P,M,y,w,I,z,k,S,T,L,E],styles:[".unauthorized-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 64px);padding:24px;max-width:1200px;margin:0 auto}.unauthorized-card[_ngcontent-%COMP%]{max-width:600px;width:100%;text-align:center;border-radius:12px;box-shadow:0 2px 8px #0000001a}.card-content[_ngcontent-%COMP%]{padding:48px 32px!important}.error-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:24px}.error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#f44336;margin-bottom:16px}.error-code[_ngcontent-%COMP%]{font-size:3rem;font-weight:600;margin:0;color:#000000de;font-family:var(--font-heading)!important}.error-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 16px;color:#000000de;font-family:var(--font-heading)!important}.error-message[_ngcontent-%COMP%]{font-size:1rem;color:#0009;margin:0 0 24px;line-height:1.6}.attempted-url[_ngcontent-%COMP%]{background:#0000000a;border-radius:8px;padding:16px;margin:0 0 32px;border-left:4px solid var(--primary-yellow, #ffc107)}.attempted-url[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:Courier New,monospace;font-size:.9rem;color:#000000de;word-break:break-all}.attempted-url[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000000de}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;margin:0 0 32px;align-items:center;justify-content:center;flex-wrap:wrap}.action-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:160px;height:48px;font-weight:500;transition:all .2s ease-in-out}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}.action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.help-text[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid rgba(0,0,0,.12)}.help-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#0009;font-style:italic;line-height:1.5}@media (max-width: 768px){.unauthorized-container[_ngcontent-%COMP%]{padding:16px}.card-content[_ngcontent-%COMP%]{padding:32px 24px!important}.error-code[_ngcontent-%COMP%]{font-size:2.5rem}.error-title[_ngcontent-%COMP%]{font-size:1.3rem}.error-message[_ngcontent-%COMP%]{font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;width:100%}.action-buttons[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100%;max-width:280px}}@media (max-width: 480px){.error-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.error-code[_ngcontent-%COMP%]{font-size:2rem}.error-title[_ngcontent-%COMP%]{font-size:1.2rem}.attempted-url[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}.error-icon.login[_ngcontent-%COMP%]{color:var(--primary-yellow, #ffc107)!important}.error-icon.block[_ngcontent-%COMP%]{color:#f44336!important}.error-icon.security[_ngcontent-%COMP%]{color:var(--accent-orange, #ff9800)!important}  .mat-mdc-raised-button{box-shadow:0 2px 8px #00000026!important}  .mat-mdc-raised-button:hover{box-shadow:0 4px 16px #0003!important}  .mat-mdc-outlined-button{border:2px solid}  .mat-mdc-outlined-button:hover{background:#0000000a}.unauthorized-card.not-logged-in[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#3498db}.unauthorized-card.forbidden[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#e74c3c}.unauthorized-card.general[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#f39c12}"]})}}return e})();export{nt as UnauthorizedComponent};
