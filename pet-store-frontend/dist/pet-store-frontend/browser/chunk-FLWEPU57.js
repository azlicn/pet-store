import{a as Kt}from"./chunk-OWSNC4QG.js";import{a as At,b as Ut}from"./chunk-2K4IJOUG.js";import{a as qt}from"./chunk-7XBR4NAU.js";import{a as ut}from"./chunk-XGWPAENB.js";import{a as zt,b as jt}from"./chunk-D6YOMAUJ.js";import{a as Rt,b as Nt}from"./chunk-5ZXECSJE.js";import{a as St,b as It,c as kt,d as Et,e as Tt,f as Lt,g as Vt,h as Dt,i as Bt,j as Ft,k as et,l as $t,m as Ht,n as z,o as Wt,p as Gt,q as Yt,r as nt,s as at}from"./chunk-VARSF3PV.js";import{a as it,b as ot}from"./chunk-SNCR5QX2.js";import{a as tt,c as U}from"./chunk-PUKFZD22.js";import"./chunk-OVUCDZ47.js";import{a as B}from"./chunk-JBPC4PL7.js";import"./chunk-EY6RNGL4.js";import{a as Ct,d as Pt,g as Mt,n as wt,p as vt,t as yt,w as bt,x as Ot}from"./chunk-IVESP2IG.js";import{a as q,b as J,c as Q,d as ht,e as xt,f as X,g as Z}from"./chunk-CWIOIJCP.js";import{d as V,g as D}from"./chunk-NWH3GCAN.js";import{$ as F,W as ft,aa as A,ba as I,ca as k,da as E}from"./chunk-ORF7SHNW.js";import"./chunk-Q64FFBLU.js";import{Ab as y,Ac as L,Bc as O,Cb as f,Fb as u,Fc as S,Hb as p,Ob as gt,Pb as r,Qb as h,Rb as P,Sa as T,Sb as H,Tb as W,Ub as G,Va as l,Vb as Y,Wa as C,Xb as b,Zb as K,bc as _t,ia as M,lb as d,nb as s,pb as N,qa as g,qb as $,ra as _,wb as o,xb as a,yb as R,za as w,zb as v}from"./chunk-4EBM5WXH.js";function te(e,c){if(e&1){let t=f();o(0,"div",13)(1,"button",14),u("click",function(){g(t);let n=p();return _(n.previousImage())}),o(2,"mat-icon"),r(3,"chevron_left"),a()(),o(4,"button",15),u("click",function(){g(t);let n=p();return _(n.nextImage())}),o(5,"mat-icon"),r(6,"chevron_right"),a()()()}if(e&2){let t=p();l(),s("disabled",!t.canGoPrevious),l(3),s("disabled",!t.canGoNext)}}function ee(e,c){if(e&1&&(o(0,"span",16),r(1),a()),e&2){let t=p();l(),H(" ",t.currentImageIndex+1," / ",t.data.pet.photoUrls==null?null:t.data.pet.photoUrls.length," ")}}var rt=(()=>{class e{constructor(t,i){this.dialogRef=t,this.data=i,this.currentImageIndex=0,this.currentImageIndex=i.initialImageIndex||0}get currentImage(){return this.data.pet.photoUrls?.[this.currentImageIndex]||""}get hasMultipleImages(){return(this.data.pet.photoUrls?.length||0)>1}get canGoPrevious(){return this.currentImageIndex>0}get canGoNext(){return this.currentImageIndex<(this.data.pet.photoUrls?.length||0)-1}previousImage(){this.canGoPrevious&&this.currentImageIndex--}nextImage(){this.canGoNext&&this.currentImageIndex++}closeModal(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||e)(C($t),C(Ht))}}static{this.\u0275cmp=M({type:e,selectors:[["app-image-modal"]],standalone:!0,features:[b],decls:18,vars:6,consts:[[1,"image-modal-container"],[1,"modal-header"],["mat-dialog-title","",1,"pet-name"],["mat-icon-button","",1,"close-button",3,"click"],["mat-dialog-content","",1,"image-container"],["loading","lazy",1,"modal-image",3,"src","alt"],["class","image-navigation",4,"ngIf"],["mat-dialog-actions","",1,"modal-footer"],[1,"image-info"],["class","image-counter",4,"ngIf"],[1,"pet-category"],[1,"action-buttons"],["mat-flat-button","",3,"click"],[1,"image-navigation"],["mat-icon-button","",1,"nav-button","prev-button",3,"click","disabled"],["mat-icon-button","",1,"nav-button","next-button",3,"click","disabled"],[1,"image-counter"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),r(3),a(),o(4,"button",3),u("click",function(){return n.closeModal()}),o(5,"mat-icon"),r(6,"close"),a()()(),o(7,"div",4),R(8,"img",5),d(9,te,7,2,"div",6),a(),o(10,"div",7)(11,"div",8),d(12,ee,2,2,"span",9),o(13,"span",10),r(14),a()(),o(15,"div",11)(16,"button",12),u("click",function(){return n.closeModal()}),r(17,"Close"),a()()()()),i&2&&(l(3),h(n.data.pet.name),l(5),s("src",n.currentImage,T)("alt",n.data.pet.name),l(),s("ngIf",n.hasMultipleImages),l(3),s("ngIf",n.hasMultipleImages),l(2),h(n.data.pet.category.name))},dependencies:[S,O,nt,Wt,Yt,Gt,I,F,A,E,k],styles:[".image-modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:95vw;max-height:95vh;width:90vw;height:85vh;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid var(--border-light);background:#fff;position:sticky;top:0;z-index:10}.pet-name[_ngcontent-%COMP%]{margin:0;font-family:var(--font-heading);font-weight:400;letter-spacing:.5px;text-transform:uppercase;color:var(--text-dark);font-size:1.4rem}.close-button[_ngcontent-%COMP%]{color:var(--text-medium)}.close-button[_ngcontent-%COMP%]:hover{color:var(--text-dark);background-color:var(--background-light)}.image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;background:#f8f8f8;flex:1;min-height:500px;max-height:80vh;padding:0;margin:0;overflow:hidden}.modal-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;border-radius:8px;box-shadow:0 4px 12px #00000026;transition:transform .3s ease}.image-navigation[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);display:flex;justify-content:space-between;pointer-events:none;padding:0 16px}.nav-button[_ngcontent-%COMP%]{pointer-events:all;background:#ffffffe6;color:var(--text-dark);width:48px;height:48px;box-shadow:0 2px 8px #0003;transition:all .2s ease}.nav-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff;transform:scale(1.1)}.nav-button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.prev-button[_ngcontent-%COMP%]{border-radius:0 50% 50% 0}.next-button[_ngcontent-%COMP%]{border-radius:50% 0 0 50%}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-top:1px solid var(--border-light);background:#fff;position:sticky;bottom:0;z-index:10}.image-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.image-counter[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-dark)}.pet-category[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-medium);font-style:italic}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}@media (max-width: 768px){.image-modal-container[_ngcontent-%COMP%]{max-width:98vw;max-height:98vh;width:95vw;height:90vh}.modal-header[_ngcontent-%COMP%]{padding:12px 16px}.pet-name[_ngcontent-%COMP%]{font-size:1.2rem}.image-container[_ngcontent-%COMP%]{min-height:400px;max-height:85vh}.nav-button[_ngcontent-%COMP%]{width:40px;height:40px}.image-navigation[_ngcontent-%COMP%]{padding:0 8px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px}}.nav-button[_ngcontent-%COMP%]:focus, .close-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary-yellow);outline-offset:2px}"]})}}return e})();var ae=e=>["/pets/edit",e];function re(e,c){if(e&1&&(o(0,"mat-icon",18),r(1),a()),e&2){let t=p();N("created-and-owned",t.isCreatedByMe()&&t.isOwnedByMe())("created-only",t.isCreatedByMe()&&!t.isOwnedByMe())("owned-only",!t.isCreatedByMe()&&t.isOwnedByMe()),s("matTooltip",t.getPetRelationshipTooltip()),l(),P(" ",t.getPetRelationshipIcon()," ")}}function le(e,c){e&1&&(o(0,"span"),r(1,", "),a())}function ce(e,c){if(e&1&&(o(0,"span",21),r(1),d(2,le,2,0,"span",22),a()),e&2){let t=c.$implicit,i=c.last;l(),P(" ",t,""),l(),s("ngIf",!i)}}function se(e,c){if(e&1&&(o(0,"div",19),d(1,ce,3,2,"span",20),a()),e&2){let t=p();l(),s("ngForOf",t.pet.tags)}}function pe(e,c){if(e&1){let t=f();o(0,"img",23),u("click",function(){g(t);let n=p();return _(n.onImageClick())}),a()}if(e&2){let t=p();s("src",t.pet.photoUrls[0],T)("alt",t.pet.name)}}function me(e,c){if(e&1&&(o(0,"div",24)(1,"mat-icon"),r(2,"pets"),a(),o(3,"span"),r(4),a()()),e&2){let t=p();l(4),h(t.pet.category.name)}}function de(e,c){if(e&1&&(o(0,"button",25)(1,"mat-icon"),r(2,"edit"),a(),r(3," Edit "),a()),e&2){let t=p();s("routerLink",K(1,ae,t.pet.id))}}function ge(e,c){if(e&1){let t=f();o(0,"button",26),u("click",function(){g(t);let n=p();return _(n.onUpdateStatus())}),o(1,"mat-icon"),r(2,"shopping_cart"),a(),r(3," Mark as Sold "),a()}}function _e(e,c){if(e&1){let t=f();o(0,"button",27),u("click",function(){g(t);let n=p();return _(n.onDeletePet())}),o(1,"mat-icon"),r(2,"delete"),a(),r(3," Delete "),a()}}function ue(e,c){if(e&1){let t=f();o(0,"button",26),u("click",function(){g(t);let n=p();return _(n.onPurchasePet())}),o(1,"mat-icon"),r(2,"shopping_cart"),a(),r(3," Purchase Pet "),a()}}var Xt=(()=>{class e{constructor(t,i){this.authService=t,this.dialog=i,this.statusUpdate=new w,this.petDelete=new w,this.petPurchase=new w}canEditPet(){if(this.authService.isAdmin())return!0;let t=this.authService.getCurrentUser();return t?this.pet.createdBy===t.id:!1}canDeletePet(){return this.authService.isAdmin()}isOwnPet(){return this.isCreatedByMe()}isCreatedByMe(){let t=this.authService.getCurrentUser();return t?this.pet.createdBy===t.id:!1}isOwnedByMe(){let t=this.authService.getCurrentUser();return t&&this.pet.owner?this.pet.owner.id===t.id:!1}getPetRelationshipIcon(){return this.isCreatedByMe()&&this.isOwnedByMe()?"favorite":this.isCreatedByMe()?"sell":this.isOwnedByMe()?"shopping_bag":""}getPetRelationshipTooltip(){return this.isCreatedByMe()&&this.isOwnedByMe()?"Created by you and owned by you":this.isCreatedByMe()?"Created by you":this.isOwnedByMe()?"Purchased by you":""}onImageClick(){if(this.pet.photoUrls&&this.pet.photoUrls.length>0){let t={pet:this.pet,initialImageIndex:0};this.dialog.open(rt,{data:t,maxWidth:"95vw",maxHeight:"95vh",width:"90vw",height:"85vh",panelClass:"image-modal-panel",hasBackdrop:!0,disableClose:!1})}}onUpdateStatus(){this.statusUpdate.emit(this.pet)}onDeletePet(){this.petDelete.emit(this.pet)}onPurchasePet(){this.petPurchase.emit(this.pet)}getStatusClass(t){switch(t){case"AVAILABLE":return"status-available";case"PENDING":return"status-pending";case"SOLD":return"status-sold";default:return"status-unknown"}}static{this.\u0275fac=function(i){return new(i||e)(C(B),C(z))}}static{this.\u0275cmp=M({type:e,selectors:[["app-pet-card"]],inputs:{pet:"pet"},outputs:{statusUpdate:"statusUpdate",petDelete:"petDelete",petPurchase:"petPurchase"},standalone:!0,features:[b],decls:29,vars:14,consts:[[1,"pet-card"],[1,"header-content"],[1,"header-text"],[1,"pet-name",2,"font-size","1rem !important"],[1,"pet-category"],[1,"header-icons"],["class","relationship-icon","matTooltipPosition","above",3,"created-and-owned","created-only","owned-only","matTooltip",4,"ngIf"],[1,"content-with-image"],[1,"pet-details"],[1,"price"],[1,"status-chip"],["class","tags",4,"ngIf"],[1,"pet-image-container"],["class","pet-image","loading","lazy","style","cursor: pointer;","title","Click to view full size",3,"src","alt","click",4,"ngIf"],["class","pet-placeholder",4,"ngIf"],["mat-flat-button","",3,"routerLink",4,"ngIf"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"click",4,"ngIf"],["matTooltipPosition","above",1,"relationship-icon",3,"matTooltip"],[1,"tags"],["class","tags-label",4,"ngFor","ngForOf"],[1,"tags-label"],[4,"ngIf"],["loading","lazy","title","Click to view full size",1,"pet-image",2,"cursor","pointer",3,"click","src","alt"],[1,"pet-placeholder"],["mat-flat-button","",3,"routerLink"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","warn",3,"click"]],template:function(i,n){i&1&&(o(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"div",2)(4,"mat-card-title",3),r(5),a(),o(6,"mat-card-subtitle",4),r(7),a()(),o(8,"div",5),d(9,re,2,8,"mat-icon",6),a()()(),o(10,"mat-card-content")(11,"div",7)(12,"div",8)(13,"p",9)(14,"strong"),r(15,"Price:"),a(),r(16),a(),o(17,"div",10)(18,"mat-chip"),r(19),a()(),d(20,se,2,1,"div",11),a(),o(21,"div",12),d(22,pe,1,2,"img",13)(23,me,5,1,"div",14),a()()(),o(24,"mat-card-actions"),d(25,de,4,3,"button",15)(26,ge,4,0,"button",16)(27,_e,4,0,"button",17)(28,ue,4,0,"button",16),a()()),i&2&&(l(5),h(n.pet.name),l(2),h(n.pet.category.name),l(2),s("ngIf",n.authService.isLoggedIn()&&!n.authService.isAdmin()&&(n.isCreatedByMe()||n.isOwnedByMe())),l(7),P(" $",n.pet.price,""),l(2),$(n.getStatusClass(n.pet.status)),l(),P(" ",n.pet.status," "),l(),s("ngIf",n.pet.tags&&n.pet.tags.length>0),l(2),s("ngIf",n.pet.photoUrls&&n.pet.photoUrls.length>0),l(),s("ngIf",!n.pet.photoUrls||n.pet.photoUrls.length===0),l(2),s("ngIf",n.canEditPet()),l(),s("ngIf",n.pet.status==="AVAILABLE"&&n.authService.isAdmin()),l(),s("ngIf",n.canDeletePet()),l(),s("ngIf",n.pet.status==="AVAILABLE"&&n.authService.isLoggedIn()&&!n.authService.isAdmin()&&!n.isOwnPet()))},dependencies:[S,L,O,D,V,I,F,E,k,Z,q,xt,Q,X,ht,J,U,tt,ot,it],styles:[".pet-card[_ngcontent-%COMP%]{height:280px;width:100%;display:flex;flex-direction:column;padding:16px!important;box-sizing:border-box}.pet-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{flex:0 0 auto;margin-bottom:12px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;width:100%;gap:8px}.header-text[_ngcontent-%COMP%]{flex:1;min-width:0}.header-icons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;margin-top:2px}.pet-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:var(--font-heading)!important;font-weight:400;letter-spacing:.5px;text-transform:uppercase}  .pet-card mat-card-title.pet-name{font-size:1.5rem!important;font-weight:600!important;line-height:1.3!important}.relationship-icon[_ngcontent-%COMP%]{font-size:1.4rem!important;width:1.4rem!important;height:1.4rem!important}.relationship-icon.created-and-owned[_ngcontent-%COMP%]{color:#e91e63}.relationship-icon.created-only[_ngcontent-%COMP%]{color:#ff9800}.relationship-icon.owned-only[_ngcontent-%COMP%]{color:#2196f3}  .pet-card mat-card-subtitle.pet-category{font-style:italic!important}.pet-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex:1;margin-bottom:12px}.content-with-image[_ngcontent-%COMP%]{display:flex;gap:12px;height:100%;align-items:flex-start}.pet-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.price[_ngcontent-%COMP%]{margin:0;font-weight:500;color:var(--text-dark)}.pet-image-container[_ngcontent-%COMP%]{flex:0 0 100px;height:100px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--background-cream) 0%,var(--background-light) 100%);border-radius:8px;padding:4px}.pet-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:6px;box-shadow:0 2px 6px #0000001a;transition:transform .2s ease}.pet-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.pet-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#888;text-align:center;height:100%;width:100%}.pet-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin-bottom:4px;color:#aaa}.pet-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{flex:0 0 auto;margin:0;padding:0;display:flex;flex-wrap:wrap;gap:4px;justify-content:space-between;align-items:center}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px;min-width:auto;font-family:var(--font-heading)!important;font-weight:500;transition:all .3s ease}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:4px}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]){background:var(--background-light)!important;color:var(--text-medium)!important;border:1px solid var(--border-light)}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]):hover{background:var(--background-cream)!important;color:var(--accent-orange)!important;border-color:var(--primary-yellow)}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-yellow) 0%,var(--accent-orange) 100%)!important;color:#fff!important;border:none}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #ffb0204d;background:linear-gradient(135deg,var(--primary-yellow-light) 0%,var(--accent-orange-light) 100%)!important}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f)!important;color:#fff!important;border:none}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #f443364d;background:linear-gradient(135deg,#f44336,#c62828)!important}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{margin-left:auto}.status-chip[_ngcontent-%COMP%]{margin:8px 0}.status-available[_ngcontent-%COMP%]{background-color:var(--accent-orange)!important;color:#fff!important}.status-pending[_ngcontent-%COMP%]{background-color:var(--primary-yellow-dark)!important;color:#fff!important}.status-sold[_ngcontent-%COMP%]{background-color:var(--primary-red)!important;color:#fff!important}.status-unknown[_ngcontent-%COMP%]{background-color:var(--text-light)!important;color:#fff!important}.tags[_ngcontent-%COMP%]{margin-top:8px}.tags[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{margin-right:4px;font-size:12px;height:24px;line-height:24px;background-color:var(--primary-yellow-light)!important;color:var(--text-dark)!important}.tags-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-medium);font-style:italic;font-family:var(--font-body)!important}@media (max-width: 768px){.pet-card[_ngcontent-%COMP%]{height:auto;min-height:240px}.content-with-image[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.pet-image-container[_ngcontent-%COMP%]{flex:0 0 80px;height:80px;align-self:center}.pet-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;padding:3px 6px}}"]})}}return e})();var fe=e=>["/pets/edit",e];function he(e,c){e&1&&(o(0,"mat-header-cell",16),r(1,"Photo"),a())}function xe(e,c){if(e&1){let t=f();o(0,"img",20),u("click",function(){g(t);let n=p().$implicit,m=p();return _(m.onImageClick(n))}),a()}if(e&2){let t=p().$implicit;s("src",t.photoUrls[0],T)("alt",t.name)}}function Ce(e,c){if(e&1&&(o(0,"div",21)(1,"mat-icon"),r(2,"pets"),a(),o(3,"span"),r(4),a()()),e&2){let t=p().$implicit;l(4),h((t.category==null?null:t.category.name)||"Pet")}}function Pe(e,c){if(e&1&&(o(0,"mat-cell",16)(1,"div",17),d(2,xe,1,2,"img",18)(3,Ce,5,1,"div",19),a()()),e&2){let t=c.$implicit;l(2),s("ngIf",t.photoUrls&&t.photoUrls.length>0),l(),s("ngIf",!t.photoUrls||t.photoUrls.length===0)}}function Me(e,c){e&1&&(o(0,"mat-header-cell"),r(1,"Name"),a())}function we(e,c){if(e&1&&(o(0,"mat-icon",27),r(1),a()),e&2){let t=p().$implicit,i=p();N("created-and-owned",i.isCreatedByMe(t)&&i.isOwnedByMe(t))("created-only",i.isCreatedByMe(t)&&!i.isOwnedByMe(t))("owned-only",!i.isCreatedByMe(t)&&i.isOwnedByMe(t)),s("matTooltip",i.getPetRelationshipTooltip(t)),l(),P(" ",i.getPetRelationshipIcon(t)," ")}}function ve(e,c){e&1&&(o(0,"span"),r(1,", "),a())}function ye(e,c){if(e&1&&(o(0,"span",30),r(1),d(2,ve,2,0,"span",31),a()),e&2){let t=c.$implicit,i=c.last;l(),P(" ",t,""),l(),s("ngIf",!i)}}function be(e,c){if(e&1&&(o(0,"div",28),d(1,ye,3,2,"span",29),a()),e&2){let t=p().$implicit;l(),s("ngForOf",t.tags)}}function Oe(e,c){if(e&1&&(o(0,"mat-cell")(1,"div",22)(2,"div",23)(3,"div",24),r(4),a(),d(5,we,2,8,"mat-icon",25),a(),d(6,be,2,1,"div",26),a()()),e&2){let t=c.$implicit,i=p();l(4),h(t.name),l(),s("ngIf",i.authService.isLoggedIn()&&!i.authService.isAdmin()&&(i.isCreatedByMe(t)||i.isOwnedByMe(t))),l(),s("ngIf",t.tags&&t.tags.length>0)}}function Se(e,c){e&1&&(o(0,"mat-header-cell",16),r(1,"Category"),a())}function Ie(e,c){if(e&1&&(o(0,"mat-cell",16)(1,"span"),r(2),a()()),e&2){let t=c.$implicit;l(2),h((t.category==null?null:t.category.name)||"N/A")}}function ke(e,c){e&1&&(o(0,"mat-header-cell",16),r(1,"Status"),a())}function Ee(e,c){if(e&1&&(o(0,"mat-cell",16)(1,"mat-chip"),r(2),a()()),e&2){let t=c.$implicit,i=p();l(),$(i.getStatusClass(t.status)),l(),P(" ",t.status," ")}}function Te(e,c){e&1&&(o(0,"mat-header-cell",32),r(1,"Price"),a())}function Le(e,c){if(e&1&&(o(0,"mat-cell",33)(1,"div",34),r(2),a()()),e&2){let t=c.$implicit;l(2),P("$",t.price,"")}}function Ve(e,c){e&1&&(o(0,"mat-header-cell",16),r(1,"Actions"),a())}function De(e,c){if(e&1&&(o(0,"button",38)(1,"mat-icon"),r(2,"edit"),a()()),e&2){let t=p().$implicit;s("routerLink",K(1,fe,t.id))}}function Be(e,c){if(e&1){let t=f();o(0,"button",39),u("click",function(){g(t);let n=p().$implicit,m=p();return _(m.onPurchase(n))}),o(1,"mat-icon"),r(2,"shopping_cart"),a()()}}function Fe(e,c){if(e&1){let t=f();o(0,"button",42),u("click",function(){g(t);let n=p(2).$implicit,m=p();return _(m.onStatusUpdate(n))}),o(1,"mat-icon"),r(2,"shopping_cart"),a()()}}function Ae(e,c){if(e&1){let t=f();v(0),d(1,Fe,3,0,"button",40),o(2,"button",41),u("click",function(){g(t);let n=p().$implicit,m=p();return _(m.onDelete(n))}),o(3,"mat-icon"),r(4,"delete"),a()(),y()}if(e&2){let t=p().$implicit;l(),s("ngIf",t.status!=="SOLD")}}function Ue(e,c){if(e&1&&(o(0,"mat-cell",16)(1,"div",35),d(2,De,3,3,"button",36)(3,Be,3,0,"button",37)(4,Ae,5,1,"ng-container",31),a()()),e&2){let t=c.$implicit,i=p();l(2),s("ngIf",i.canEditPet(t)),l(),s("ngIf",!i.authService.isAdmin()&&t.status==="AVAILABLE"&&!i.isOwnPet(t)),l(),s("ngIf",i.authService.isAdmin())}}function ze(e,c){e&1&&R(0,"mat-header-row")}function je(e,c){e&1&&R(0,"mat-row",43)}var Zt=(()=>{class e{constructor(t,i){this.authService=t,this.dialog=i,this.pets=[],this.statusUpdate=new w,this.petDelete=new w,this.petPurchase=new w,this.displayedColumns=["photo","name","category","status","price","actions"]}getStatusColor(t){switch(t){case"AVAILABLE":return"primary";case"PENDING":return"accent";case"SOLD":return"warn";default:return""}}getStatusClass(t){switch(t){case"AVAILABLE":return"status-available";case"PENDING":return"status-pending";case"SOLD":return"status-sold";default:return"status-unknown"}}onStatusUpdate(t){this.statusUpdate.emit(t)}onDelete(t){this.petDelete.emit(t)}onPurchase(t){this.petPurchase.emit(t)}onImageClick(t){if(t.photoUrls&&t.photoUrls.length>0){let i={pet:t,initialImageIndex:0};this.dialog.open(rt,{data:i,maxWidth:"95vw",maxHeight:"95vh",width:"90vw",height:"85vh",panelClass:"image-modal-panel",hasBackdrop:!0,disableClose:!1})}}canEditPet(t){if(this.authService.isAdmin())return!0;let i=this.authService.getCurrentUser();return i?t.createdBy===i.id:!1}isOwnPet(t){let i=this.authService.getCurrentUser();return i?t.createdBy===i.id:!1}isCreatedByMe(t){let i=this.authService.getCurrentUser();return i?t.createdBy===i.id:!1}isOwnedByMe(t){let i=this.authService.getCurrentUser();return i&&t.owner?t.owner.id===i.id:!1}getPetRelationshipIcon(t){return this.isCreatedByMe(t)&&this.isOwnedByMe(t)?"favorite":this.isCreatedByMe(t)?"sell":this.isOwnedByMe(t)?"shopping_bag":""}getPetRelationshipTooltip(t){return this.isCreatedByMe(t)&&this.isOwnedByMe(t)?"Created by you and owned by you":this.isCreatedByMe(t)?"Listed for sale by you":this.isOwnedByMe(t)?"Purchased by you":""}static{this.\u0275fac=function(i){return new(i||e)(C(B),C(z))}}static{this.\u0275cmp=M({type:e,selectors:[["app-pet-list-view"]],inputs:{pets:"pets"},outputs:{statusUpdate:"statusUpdate",petDelete:"petDelete",petPurchase:"petPurchase"},standalone:!0,features:[b],decls:22,vars:3,consts:[[1,"pet-list-view"],[1,"pet-table",3,"dataSource"],["matColumnDef","photo"],["style","display: flex; justify-content: center !important;",4,"matHeaderCellDef"],["style","display: flex; justify-content: center !important;",4,"matCellDef"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","price"],["style","justify-content: flex-end !important;",4,"matHeaderCellDef"],["style","display: flex !important; justify-content: flex-end !important;",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],["class","pet-row",4,"matRowDef","matRowDefColumns"],[2,"display","flex","justify-content","center !important"],[1,"pet-photo"],["class","pet-thumbnail","loading","lazy","style","cursor: pointer;","title","Click to view full size",3,"src","alt","click",4,"ngIf"],["class","pet-placeholder",4,"ngIf"],["loading","lazy","title","Click to view full size",1,"pet-thumbnail",2,"cursor","pointer",3,"click","src","alt"],[1,"pet-placeholder"],[1,"pet-info"],[1,"pet-name-container"],[1,"pet-name"],["class","relationship-icon","matTooltipPosition","above",3,"created-and-owned","created-only","owned-only","matTooltip",4,"ngIf"],["class","pet-tags",4,"ngIf"],["matTooltipPosition","above",1,"relationship-icon",3,"matTooltip"],[1,"pet-tags"],["class","tags-label",4,"ngFor","ngForOf"],[1,"tags-label"],[4,"ngIf"],[2,"justify-content","flex-end !important"],[2,"display","flex !important","justify-content","flex-end !important"],[1,"price"],[1,"action-buttons"],["mat-icon-button","","matTooltip","Edit Pet","color","primary",3,"routerLink",4,"ngIf"],["mat-icon-button","","matTooltip","Purchase Pet","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Edit Pet","color","primary",3,"routerLink"],["mat-icon-button","","matTooltip","Purchase Pet","color","primary",3,"click"],["mat-icon-button","","matTooltip","Mark as Sold","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Delete Pet","color","warn",3,"click"],["mat-icon-button","","matTooltip","Mark as Sold","color","accent",3,"click"],[1,"pet-row"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"mat-table",1),v(2,2),d(3,he,2,0,"mat-header-cell",3)(4,Pe,4,2,"mat-cell",4),y(),v(5,5),d(6,Me,2,0,"mat-header-cell",6)(7,Oe,7,3,"mat-cell",7),y(),v(8,8),d(9,Se,2,0,"mat-header-cell",3)(10,Ie,3,1,"mat-cell",4),y(),v(11,9),d(12,ke,2,0,"mat-header-cell",3)(13,Ee,3,3,"mat-cell",4),y(),v(14,10),d(15,Te,2,0,"mat-header-cell",11)(16,Le,3,1,"mat-cell",12),y(),v(17,13),d(18,Ve,2,0,"mat-header-cell",3)(19,Ue,5,3,"mat-cell",4),y(),d(20,ze,1,0,"mat-header-row",14)(21,je,1,0,"mat-row",15),a()()),i&2&&(l(),s("dataSource",n.pets),l(19),s("matHeaderRowDef",n.displayedColumns),l(),s("matRowDefColumns",n.displayedColumns))},dependencies:[S,L,O,D,V,et,St,kt,Vt,Et,It,Dt,Tt,Lt,Bt,Ft,I,A,E,k,U,tt,ot,it],styles:[".pet-list-view[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.pet-table[_ngcontent-%COMP%]{width:100%;min-width:800px;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.pet-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.pet-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.pet-photo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.pet-photo[_ngcontent-%COMP%]   .pet-thumbnail[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;border-radius:8px;border:2px solid #e0e0e0;transition:transform .2s ease,box-shadow .2s ease}.pet-photo[_ngcontent-%COMP%]   .pet-thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #0003}.pet-photo[_ngcontent-%COMP%]   .pet-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:60px;height:60px;background-color:#f5f5f5;border-radius:8px;border:2px solid #e0e0e0;color:#999}.pet-photo[_ngcontent-%COMP%]   .pet-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;margin-bottom:2px}.pet-photo[_ngcontent-%COMP%]   .pet-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;text-align:center;line-height:1}.pet-info[_ngcontent-%COMP%]   .pet-name-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pet-info[_ngcontent-%COMP%]   .pet-name[_ngcontent-%COMP%]{font-weight:500;font-size:16px;color:#333;margin-bottom:4px}.pet-info[_ngcontent-%COMP%]   .relationship-icon[_ngcontent-%COMP%]{font-size:1.2rem!important;width:1.2rem!important;height:1.2rem!important}.pet-info[_ngcontent-%COMP%]   .relationship-icon.created-and-owned[_ngcontent-%COMP%]{color:#e91e63}.pet-info[_ngcontent-%COMP%]   .relationship-icon.created-only[_ngcontent-%COMP%]{color:#ff9800}.pet-info[_ngcontent-%COMP%]   .relationship-icon.owned-only[_ngcontent-%COMP%]{color:#2196f3}.pet-info[_ngcontent-%COMP%]   .pet-tags[_ngcontent-%COMP%]{margin-top:4px}.pet-info[_ngcontent-%COMP%]   .pet-tags[_ngcontent-%COMP%]   .tags-label[_ngcontent-%COMP%]{font-size:12px;color:#666;font-style:italic}.price[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#ff6b35;text-align:right}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;line-height:36px}mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#333;background-color:#f8f9fa}mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{padding:12px 16px}.mat-column-photo[_ngcontent-%COMP%]{width:8%;min-width:80px}.mat-column-name[_ngcontent-%COMP%]{width:45%;min-width:300px}.mat-column-category[_ngcontent-%COMP%]{width:12%;min-width:100px}.mat-column-status[_ngcontent-%COMP%]{width:10%;min-width:90px}.mat-column-price[_ngcontent-%COMP%]{width:8%;min-width:70px;text-align:right}.mat-column-price[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{text-align:right}.mat-column-actions[_ngcontent-%COMP%]{width:17%;min-width:150px}.status-available[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important}.status-pending[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important}.status-sold[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff!important}.status-unknown[_ngcontent-%COMP%]{background-color:#9e9e9e!important;color:#fff!important}@media (max-width: 768px){.pet-table[_ngcontent-%COMP%]{font-size:14px}.pet-photo[_ngcontent-%COMP%]   .pet-thumbnail[_ngcontent-%COMP%]{width:40px;height:40px}mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{padding:8px 12px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;line-height:32px}.mat-column-photo[_ngcontent-%COMP%]{width:12%;min-width:70px}.mat-column-name[_ngcontent-%COMP%]{width:30%;min-width:150px}.mat-column-category[_ngcontent-%COMP%]{width:15%;min-width:80px}.mat-column-status[_ngcontent-%COMP%]{width:13%;min-width:70px}.mat-column-price[_ngcontent-%COMP%]{width:10%;min-width:60px}.mat-column-actions[_ngcontent-%COMP%]{width:20%;min-width:120px}}"]})}}return e})();function Re(e,c){if(e&1&&(o(0,"mat-option",24),r(1),a()),e&2){let t=c.$implicit;s("value",t.id),l(),P(" ",t.name," ")}}function Ne(e,c){if(e&1){let t=f();o(0,"mat-card",11)(1,"mat-card-header")(2,"div",12)(3,"mat-card-title"),r(4,"Search & Filter Pets"),a(),o(5,"a",13),u("click",function(){g(t);let n=p();return _(n.clearFilters())}),r(6,"Reset"),a()()(),o(7,"mat-card-content")(8,"div",14)(9,"mat-form-field",15)(10,"mat-label"),r(11,"Search by name"),a(),o(12,"input",16),Y("ngModelChange",function(n){g(t);let m=p();return G(m.searchFilters.name,n)||(m.searchFilters.name=n),_(n)}),u("input",function(){g(t);let n=p();return _(n.onFilterChange())}),a(),o(13,"mat-icon",17),r(14,"search"),a()(),o(15,"mat-form-field",15)(16,"mat-label"),r(17,"Category"),a(),o(18,"mat-select",18),Y("ngModelChange",function(n){g(t);let m=p();return G(m.searchFilters.categoryId,n)||(m.searchFilters.categoryId=n),_(n)}),u("selectionChange",function(){g(t);let n=p();return _(n.onFilterChange())}),o(19,"mat-option",19),r(20,"All Categories"),a(),d(21,Re,2,2,"mat-option",20),a()(),o(22,"mat-form-field",15)(23,"mat-label"),r(24,"Status"),a(),o(25,"mat-select",18),Y("ngModelChange",function(n){g(t);let m=p();return G(m.searchFilters.status,n)||(m.searchFilters.status=n),_(n)}),u("selectionChange",function(){g(t);let n=p();return _(n.onFilterChange())}),o(26,"mat-option",19),r(27,"All Status"),a(),o(28,"mat-option",21),r(29,"Available"),a(),o(30,"mat-option",22),r(31,"Pending"),a(),o(32,"mat-option",23),r(33,"Sold"),a()()()()()()}if(e&2){let t=p();l(12),W("ngModel",t.searchFilters.name),l(6),W("ngModel",t.searchFilters.categoryId),l(3),s("ngForOf",t.allCategories),l(4),W("ngModel",t.searchFilters.status)}}function $e(e,c){e&1&&(o(0,"div",25)(1,"span",26),r(2,"Icons:"),a(),o(3,"span",27)(4,"mat-icon",28),r(5,"sell"),a(),r(6," Listed for sale by you "),a(),o(7,"span",27)(8,"mat-icon",29),r(9,"shopping_bag"),a(),r(10," Purchased by you "),a()())}function He(e,c){e&1&&(o(0,"button",30)(1,"mat-icon"),r(2,"add"),a(),r(3," Add New Pet "),a())}function We(e,c){if(e&1){let t=f();o(0,"button",31),u("click",function(){g(t);let n=p();return _(n.toggleMyPets())}),o(1,"mat-icon"),r(2),a(),r(3),a()}if(e&2){let t=p();s("color",t.showMyPetsOnly?"accent":"basic"),l(2),h((t.showMyPetsOnly,"pets")),l(),P(" ",t.showMyPetsOnly?"Show All Pets":"My Pets"," ")}}function Ge(e,c){e&1&&(o(0,"span",35),r(1,"(My Pets Only)"),a())}function Ye(e,c){if(e&1&&(o(0,"div",32)(1,"p",33),r(2),d(3,Ge,2,0,"span",34),a()()),e&2){let t=p();l(2),H(" Showing ",t.pets.length," of ",t.allPets.length," pets "),l(),s("ngIf",t.showMyPetsOnly)}}function Ke(e,c){if(e&1){let t=f();o(0,"app-pet-card",40),u("statusUpdate",function(n){g(t);let m=p(3);return _(m.updateStatus(n))})("petDelete",function(n){g(t);let m=p(3);return _(m.deletePet(n))})("petPurchase",function(n){g(t);let m=p(3);return _(m.purchasePet(n))}),a()}if(e&2){let t=c.$implicit;s("pet",t)}}function qe(e,c){if(e&1&&(o(0,"div",38),d(1,Ke,1,1,"app-pet-card",39),a()),e&2){let t=p(2);l(),s("ngForOf",t.pets)}}function Je(e,c){if(e&1){let t=f();o(0,"app-pet-list-view",41),u("statusUpdate",function(n){g(t);let m=p(2);return _(m.updateStatus(n))})("petDelete",function(n){g(t);let m=p(2);return _(m.deletePet(n))})("petPurchase",function(n){g(t);let m=p(2);return _(m.purchasePet(n))}),a()}if(e&2){let t=p(2);s("pets",t.pets)}}function Qe(e,c){if(e&1&&(o(0,"div"),d(1,qe,2,1,"div",36)(2,Je,1,1,"app-pet-list-view",37),a()),e&2){let t=p();l(),s("ngIf",t.viewMode==="card"),l(),s("ngIf",t.viewMode==="list")}}function Xe(e,c){e&1&&(o(0,"span"),r(1," or add a new pet"),a())}function Ze(e,c){if(e&1&&(o(0,"p"),r(1,"There are no pets matching your criteria. Try adjusting your filters"),d(2,Xe,2,0,"span",45),r(3,"."),a()),e&2){let t=p(2);l(2),s("ngIf",t.authService.isAdmin())}}function tn(e,c){e&1&&(o(0,"p"),r(1,"You haven't created any pets yet. Start by adding your first pet!"),a())}function en(e,c){e&1&&(o(0,"button",30)(1,"mat-icon"),r(2,"add"),a(),r(3," Add First Pet "),a())}function nn(e,c){if(e&1&&(o(0,"mat-card",42)(1,"mat-card-content")(2,"div",43)(3,"mat-icon",44),r(4,"pets"),a(),o(5,"h2"),r(6),a(),d(7,Ze,4,1,"p",45)(8,tn,2,0,"p",45)(9,en,4,0,"button",5),a()()()),e&2){let t=p();l(6),h(t.showMyPetsOnly?"No pets created by you":"No pets found"),l(),s("ngIf",!t.showMyPetsOnly),l(),s("ngIf",t.showMyPetsOnly),l(),s("ngIf",t.authService.isLoggedIn())}}var li=(()=>{class e{constructor(t,i,n,m,x){this.petService=t,this.categoryService=i,this.snackBar=n,this.dialog=m,this.authService=x,this.pets=[],this.allPets=[],this.allCategories=[],this.showFilters=!0,this.viewMode="card",this.showMyPetsOnly=!1,this.searchFilters={name:"",categoryId:"",status:""}}ngOnInit(){this.loadPets(),this.loadCategories()}loadPets(){this.petService.getAllPets().subscribe({next:t=>{this.allPets=t,this.pets=[...t],this.applyFilters()},error:t=>{this.snackBar.open("Error loading pets","Close",{duration:3e3}),console.error("Error loading pets:",t)}})}loadCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{this.allCategories=t},error:t=>{console.error("Error loading categories:",t)}})}onFilterChange(){this.applyFilters()}applyFilters(){if(this.showMyPetsOnly){if(!this.authService.isLoggedIn()){this.snackBar.open("Please log in to view your pets","Close",{duration:3e3}),this.showMyPetsOnly=!1;return}this.petService.getMyPets().subscribe({next:i=>{this.pets=i},error:i=>{this.snackBar.open("Error loading your pets","Close",{duration:3e3}),console.error("Error loading user pets:",i),this.pets=[]}});return}if(this.searchFilters.name.trim()||this.searchFilters.categoryId||this.searchFilters.status){let i={};this.searchFilters.name.trim()&&(i.name=this.searchFilters.name.trim()),this.searchFilters.categoryId&&(i.categoryId=+this.searchFilters.categoryId),this.searchFilters.status&&(i.status=this.searchFilters.status),this.petService.searchPets(i).subscribe({next:n=>{this.pets=n},error:n=>{this.snackBar.open("Error filtering pets","Close",{duration:3e3}),console.error("Error filtering pets:",n)}})}else this.pets=[...this.allPets]}toggleMyPets(){this.showMyPetsOnly=!this.showMyPetsOnly,this.applyFilters()}clearFilters(){this.searchFilters={name:"",categoryId:"",status:""},this.showMyPetsOnly=!1,this.applyFilters()}toggleFilters(){this.showFilters=!this.showFilters}toggleView(){this.viewMode=this.viewMode==="card"?"list":"card"}refreshPets(){this.loadPets(),this.snackBar.open("Pets refreshed","Close",{duration:2e3})}updateStatus(t){if(!t.id)return;let i={title:"Mark Pet as Sold",message:`Are you sure you want to mark <strong>"${t.name}"</strong> as sold?
This action will update the pet's status and make it unavailable for purchase.`,confirmText:"Mark as Sold",cancelText:"Cancel",icon:"shopping_cart",danger:!1};this.dialog.open(at,{width:"450px",maxWidth:"90vw",data:i,disableClose:!0,panelClass:"confirm-dialog-container",hasBackdrop:!0,backdropClass:"confirm-dialog-backdrop"}).afterClosed().subscribe(m=>{m&&t.id&&this.petService.updatePetStatus(t.id,Kt.SOLD).subscribe({next:x=>{let j=this.pets.findIndex(lt=>lt.id===t.id);j!==-1&&(this.pets[j]=x),this.snackBar.open("Pet status updated","Close",{duration:2e3})},error:x=>{this.snackBar.open("Error updating pet status","Close",{duration:3e3}),console.error("Error updating pet status:",x)}})})}deletePet(t){if(!t.id)return;let i={title:"Delete Pet",message:`Are you sure you want to delete <strong>"${t.name}"</strong>?
This action cannot be undone and will permanently remove this pet from the system.`,confirmText:"Delete Pet",cancelText:"Keep Pet",icon:"delete_forever"};this.dialog.open(at,{width:"450px",maxWidth:"90vw",data:i,disableClose:!0,panelClass:"confirm-dialog-container",hasBackdrop:!0,backdropClass:"confirm-dialog-backdrop"}).afterClosed().subscribe(m=>{m&&t.id&&this.petService.deletePet(t.id).subscribe({next:()=>{this.pets=this.pets.filter(x=>x.id!==t.id),this.snackBar.open("Pet deleted successfully","Close",{duration:2e3})},error:x=>{this.snackBar.open("Error deleting pet","Close",{duration:3e3}),console.error("Error deleting pet:",x)}})})}purchasePet(t){if(!t.id)return;let i={title:"Purchase Pet",message:`Are you sure you want to purchase <strong>"${t.name}"</strong> for $${t.price}?
This will mark the pet as sold and update its status.`,confirmText:"Purchase Now",cancelText:"Not Now",icon:"pets",danger:!1};this.dialog.open(at,{width:"450px",maxWidth:"90vw",data:i,disableClose:!0,panelClass:"confirm-dialog-container",hasBackdrop:!0,backdropClass:"confirm-dialog-backdrop"}).afterClosed().subscribe(m=>{m&&t.id&&this.petService.purchasePet(t.id).subscribe({next:x=>{let j=this.pets.findIndex(lt=>lt.id===t.id);j!==-1&&(this.pets[j]=x),this.snackBar.open("Pet purchased successfully!","Close",{duration:3e3})},error:x=>{this.snackBar.open("Error purchasing pet","Close",{duration:3e3}),console.error("Error purchasing pet:",x)}})})}static{this.\u0275fac=function(i){return new(i||e)(C(ut),C(qt),C(Rt),C(z),C(B))}}static{this.\u0275cmp=M({type:e,selectors:[["app-pet-list"]],standalone:!0,features:[b],decls:18,vars:12,consts:[["noPets",""],[1,"pet-list-container"],["class","filter-card",4,"ngIf"],[1,"action-buttons"],["class","icon-legend",4,"ngIf"],["mat-flat-button","","color","primary","routerLink","/pets/add",4,"ngIf"],["mat-flat-button","",3,"color","click",4,"ngIf"],["mat-icon-button","",1,"view-toggle",3,"click","title"],["mat-icon-button","",1,"filter-toggle",3,"click","title"],["class","pet-count-info",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"filter-card"],[1,"filter-header"],[1,"reset-link",3,"click"],[1,"filter-row"],["appearance","outline"],["matInput","","placeholder","Enter pet name",3,"ngModelChange","input","ngModel"],["matSuffix",""],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","AVAILABLE"],["value","PENDING"],["value","SOLD"],[3,"value"],[1,"icon-legend"],[1,"legend-title"],[1,"legend-item"],[1,"legend-icon","created-only"],[1,"legend-icon","owned-only"],["mat-flat-button","","color","primary","routerLink","/pets/add"],["mat-flat-button","",3,"click","color"],[1,"pet-count-info"],[1,"count-text"],["class","filter-indicator",4,"ngIf"],[1,"filter-indicator"],["class","pets-grid",4,"ngIf"],[3,"pets","statusUpdate","petDelete","petPurchase",4,"ngIf"],[1,"pets-grid"],[3,"pet","statusUpdate","petDelete","petPurchase",4,"ngFor","ngForOf"],[3,"statusUpdate","petDelete","petPurchase","pet"],[3,"statusUpdate","petDelete","petPurchase","pets"],[1,"no-pets-card"],[1,"no-pets-content"],[1,"large-icon"],[4,"ngIf"]],template:function(i,n){if(i&1){let m=f();o(0,"div",1)(1,"h1"),r(2),a(),d(3,Ne,34,4,"mat-card",2),o(4,"div",3),d(5,$e,11,0,"div",4)(6,He,4,0,"button",5)(7,We,4,3,"button",6),o(8,"button",7),u("click",function(){return g(m),_(n.toggleView())}),o(9,"mat-icon"),r(10),a()(),o(11,"button",8),u("click",function(){return g(m),_(n.toggleFilters())}),o(12,"mat-icon"),r(13),a()()(),d(14,Ye,4,3,"div",9)(15,Qe,3,2,"div",10)(16,nn,10,4,"ng-template",null,0,_t),a()}if(i&2){let m=gt(17);l(2),h(n.showMyPetsOnly?"My Pets":"Pets"),l(),s("ngIf",n.showFilters),l(2),s("ngIf",n.showMyPetsOnly&&n.authService.isLoggedIn()&&!n.authService.isAdmin()),l(),s("ngIf",n.authService.isLoggedIn()),l(),s("ngIf",n.authService.isLoggedIn()&&!n.authService.isAdmin()),l(),s("title",n.viewMode==="card"?"Switch to List View":"Switch to Card View"),l(2),h(n.viewMode==="card"?"view_list":"view_module"),l(),s("title",n.showFilters?"Hide Filters":"Show Filters"),l(2),h(n.showFilters?"filter_alt_off":"filter_alt"),l(),s("ngIf",n.pets.length>0),l(),s("ngIf",n.pets.length>0)("ngIfElse",m)}},dependencies:[S,L,O,D,V,wt,Ct,Pt,Mt,et,I,F,A,E,k,Z,q,Q,X,J,U,Ut,bt,vt,yt,At,ft,jt,zt,Ot,Nt,nt,Xt,Zt],styles:[".pet-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.filter-card[_ngcontent-%COMP%]{margin-bottom:20px}.filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.reset-link[_ngcontent-%COMP%]{color:#ff6b35;cursor:pointer;font-size:14px;text-decoration:none;font-weight:500;transition:color .2s ease}.reset-link[_ngcontent-%COMP%]:hover{color:#e55a2b;text-decoration:underline}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;justify-content:space-between}.filter-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:0}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px;justify-content:flex-end;align-items:center;flex-wrap:wrap}.pet-count-info[_ngcontent-%COMP%]{margin-bottom:16px}.pet-count-info[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0;text-align:center}.pet-count-info[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]   .filter-indicator[_ngcontent-%COMP%]{color:#ff6b35;font-weight:500;margin-left:4px}.filter-toggle[_ngcontent-%COMP%]{color:#666;transition:color .2s ease}.filter-toggle[_ngcontent-%COMP%]:hover{color:#ff6b35}.view-toggle[_ngcontent-%COMP%]{color:#666;transition:color .2s ease}.view-toggle[_ngcontent-%COMP%]:hover{color:#ff6b35}.pets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;align-items:stretch}.no-pets-card[_ngcontent-%COMP%]{text-align:center;padding:40px}.no-pets-content[_ngcontent-%COMP%]   .large-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc;margin-bottom:16px}.no-pets-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#666;margin-bottom:8px}.no-pets-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999;margin-bottom:20px}.icon-legend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-left:12px;padding:8px 12px;background-color:#f5f5f5;border-radius:8px;font-size:.875rem;color:#666}.icon-legend[_ngcontent-%COMP%]   .legend-title[_ngcontent-%COMP%]{font-weight:500;color:#333}.icon-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.icon-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon[_ngcontent-%COMP%]{font-size:1rem!important;width:1rem!important;height:1rem!important}.icon-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.created-and-owned[_ngcontent-%COMP%]{color:#e91e63}.icon-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.created-only[_ngcontent-%COMP%]{color:#ff9800}.icon-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.owned-only[_ngcontent-%COMP%]{color:#2196f3}@media (max-width: 768px){.icon-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px;margin-left:0;margin-top:8px}.icon-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{gap:6px}}"]})}}return e})();export{li as PetListComponent};
